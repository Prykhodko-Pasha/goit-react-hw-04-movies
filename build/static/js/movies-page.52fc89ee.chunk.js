(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[4],{36:function(e,t,c){"use strict";c.d(t,"e",(function(){return a})),c.d(t,"d",(function(){return o})),c.d(t,"a",(function(){return s})),c.d(t,"c",(function(){return i})),c.d(t,"b",(function(){return u}));var r="https://api.themoviedb.org/3",n="352acb8d318346b404dce557309fb342";function a(e){return fetch("".concat(r,"/trending/movie/week?api_key=").concat(n,"&page=").concat(e)).then((function(e){return e.json()})).catch((function(e){return Promise.reject(e)}))}function o(e,t){return fetch("".concat(r,"/search/movie?api_key=").concat(n,"&query=").concat(e,"&page=").concat(t)).then((function(e){return e.json()})).catch((function(e){return Promise.reject(e)}))}function s(e){return fetch("".concat(r,"/movie/").concat(e,"?api_key=").concat(n,"&language=en-US")).then((function(e){return e.json()})).catch((function(e){return Promise.reject(e)}))}function i(e){return fetch("".concat(r,"/movie/").concat(e,"/reviews?api_key=").concat(n)).then((function(e){return e.json()})).catch((function(e){return Promise.reject(e)}))}function u(e){return console.log("".concat(r,"/movie/").concat(e,"/credits?api_key=").concat(n)),fetch("".concat(r,"/movie/").concat(e,"/credits?api_key=").concat(n)).then((function(e){return e.json()})).catch((function(e){return Promise.reject(e)}))}},38:function(e,t,c){e.exports={MoviesGallery:"MoviesGallery_MoviesGallery__1hFKr",MoviesGalleryItem:"MoviesGallery_MoviesGalleryItem__7a9xO"}},39:function(e,t,c){e.exports={MoviesGalleryItem__image:"MoviesGalleryItem_MoviesGalleryItem__image__3Vxgj",MoviesGalleryItem__descr:"MoviesGalleryItem_MoviesGalleryItem__descr__2N6JR",MoviesGalleryItem__name:"MoviesGalleryItem_MoviesGalleryItem__name__3_Ynv",MoviesGalleryItem__year:"MoviesGalleryItem_MoviesGalleryItem__year__dFE-r"}},40:function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));c(0);var r=c(41),n=c.n(r),a=c(1);function o(e){var t=e.onLoadMore;return Object(a.jsx)("button",{type:"button",className:n.a.Button,onClick:t,children:"Load more"})}},41:function(e,t,c){e.exports={Button:"Button_Button__7CmtT"}},44:function(e,t,c){"use strict";c.d(t,"a",(function(){return _}));var r=c(2),n=c(8),a=c(38),o=c.n(a),s=c(39),i=c.n(s),u=c(1);function l(e){var t=e.id,c=e.poster_path,r=e.title,n=e.release_date,a=n?n.slice(0,4):"0000";return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{id:t,src:c?"https://image.tmdb.org/t/p/w500".concat(c):"https://artismedia.by/blog/wp-content/uploads/2018/05/in-blog2-1.png",alt:"",className:i.a.MoviesGalleryItem__image}),Object(u.jsxs)("div",{className:i.a.MoviesGalleryItem__descr,children:[Object(u.jsx)("p",{className:i.a.MoviesGalleryItem__name,children:r}),Object(u.jsx)("p",{className:i.a.MoviesGalleryItem__year,children:a})]})]})}function _(e){var t=e.moviesArr,c=Object(r.i)().url,a=c.includes("/movies")?c:"".concat(c,"movies"),s=Object(r.g)();return Object(u.jsx)("ul",{className:o.a.MoviesGallery,children:t.map((function(e,t){var c=e.id,r=e.poster_path,i=e.title,_=e.release_date;return Object(u.jsx)(n.b,{to:{pathname:"".concat(a,"/").concat(c),state:{from:s}},className:o.a.MoviesGalleryItem,children:Object(u.jsx)(l,{id:c,poster_path:r,title:i,release_date:_})},t)}))})}},45:function(e,t,c){e.exports={Searchbar:"Searchbar_Searchbar__1BnZ8",SearchForm:"Searchbar_SearchForm__1d_dh",SearchForm__button:"Searchbar_SearchForm__button__p1Ikf",SearchForm__button__label:"Searchbar_SearchForm__button__label__3L929",SearchForm__input:"Searchbar_SearchForm__input__kR49j"}},55:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return d}));var r=c(37),n=c(35),a=c(0),o=c(2),s=c(36),i=c(45),u=c.n(i),l=c(52),_=c(1);function h(e){var t=e.onSearch,c=Object(a.useState)(""),r=Object(n.a)(c,2),o=r[0],s=r[1];return Object(_.jsx)("div",{className:u.a.Searchbar,children:Object(_.jsxs)("form",{className:u.a.SearchForm,onSubmit:function(e){e.preventDefault(),t(o)},children:[Object(_.jsxs)("button",{type:"submit",className:u.a.SearchForm__button,children:[Object(_.jsx)(l.a,{style:{width:"70%",height:"70%"}}),Object(_.jsx)("span",{className:u.a.SearchForm__button__label,children:"Search"})]}),Object(_.jsx)("input",{className:u.a.SearchForm__input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies...",onChange:function(e){s(e.currentTarget.value.trim())}})]})})}var m=c(15),j=c(44),b=c(40);function d(){var e=Object(a.useState)(""),t=Object(n.a)(e,2),c=t[0],i=t[1],u=Object(a.useState)([]),l=Object(n.a)(u,2),d=l[0],f=l[1],v=Object(a.useState)("idle"),p=Object(n.a)(v,2),O=p[0],y=p[1],g=Object(a.useState)(1),S=Object(n.a)(g,2),x=S[0],M=S[1],G=Object(a.useState)(!1),I=Object(n.a)(G,2),F=I[0],N=I[1],w=Object(a.useState)(""),k=Object(n.a)(w,2),P=k[0],B=k[1],L=Object(o.f)(),T=Object(o.g)(),q=new URLSearchParams(T.search).get("query");Object(a.useEffect)((function(){q&&i(q)}),[q]),Object(a.useEffect)((function(){c&&(y("pending"),Object(s.d)(c,x).then((function(e){if(0===e.results.length)y("rejected"),B("There are no movies for this query :(");else{var t=Math.ceil(e.total_pages/12),c=e.results.map((function(e){return{id:e.id,poster_path:e.poster_path,title:e.title,release_date:e.release_date}}));f((function(e){return[].concat(Object(r.a)(e),Object(r.a)(c))})),y("resolved"),N(t!==x)}})).catch((function(e){y("rejected"),B("There is an error: ".concat(e))})),window.scrollTo({top:document.documentElement.scrollHeight-window.innerHeight,behavior:"smooth"}))}),[c,x]);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(h,{onSearch:function(e){i(e),f([]),M(1),L.push("?query=".concat(e))}}),"pending"===O&&Object(_.jsxs)(_.Fragment,{children:[0!==d.length&&Object(_.jsx)(j.a,{moviesArr:d}),Object(_.jsx)("div",{style:{height:"60vh"},children:Object(_.jsx)(m.a,{})}),Object(_.jsx)("div",{className:"loadMoreReplacer"})]}),"rejected"===O&&Object(_.jsx)("p",{className:"Msg",children:P}),"resolved"===O&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(j.a,{moviesArr:d}),F&&Object(_.jsx)(b.a,{onLoadMore:function(){M(x+1),y("pending")}})]})]})}}}]);
//# sourceMappingURL=movies-page.52fc89ee.chunk.js.map